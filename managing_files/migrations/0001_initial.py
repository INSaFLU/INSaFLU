# -*- coding: utf-8 -*-
# Generated by Django 1.11.29 on 2022-11-17 15:12
from __future__ import unicode_literals

from django.conf import settings
import django.contrib.gis.db.models.fields
from django.db import migrations, models
import django.db.models.deletion
import fluwebvirus.formatChecker
import managing_files.models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('manage_virus', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='CountVariations',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('total', models.PositiveIntegerField(default=0)),
                ('var_less_50', models.PositiveIntegerField(default=0)),
                ('var_bigger_50_90', models.PositiveIntegerField(default=0)),
                ('var_bigger_90', models.PositiveIntegerField(default=0)),
            ],
        ),
        migrations.CreateModel(
            name='DataSet',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(blank=True, db_index=True, max_length=100, null=True)),
                ('creation_date', models.DateTimeField(auto_now_add=True, verbose_name='Date creation')),
                ('owner', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='data_set', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['creation_date', 'name'],
            },
        ),
        migrations.CreateModel(
            name='MetaKey',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(blank=True, db_index=True, max_length=200, null=True)),
            ],
            options={
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='MetaKeyProject',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('creation_date', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='uploaded date')),
                ('value', models.CharField(default='value not needed', max_length=200)),
                ('description', models.TextField(default='')),
                ('meta_tag', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='meta_key_project', to='managing_files.MetaKey')),
                ('owner', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='meta_key_project', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['project__id', '-creation_date'],
            },
        ),
        migrations.CreateModel(
            name='MetaKeyProjectSample',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('creation_date', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='uploaded date')),
                ('value', models.CharField(default='value not needed', max_length=200)),
                ('description', models.TextField(default='')),
                ('meta_tag', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='meta_key_project_sample', to='managing_files.MetaKey')),
                ('owner', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='meta_key_project_sample', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['project_sample__id', '-creation_date'],
            },
        ),
        migrations.CreateModel(
            name='MetaKeyReference',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('creation_date', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='uploaded date')),
                ('value', models.CharField(default='value not needed', max_length=200)),
                ('description', models.TextField(default='')),
                ('meta_tag', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='meta_key_reference', to='managing_files.MetaKey')),
                ('owner', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='meta_key_reference', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['reference__id', '-creation_date'],
            },
        ),
        migrations.CreateModel(
            name='MetaKeySample',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('creation_date', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='uploaded date')),
                ('value', models.CharField(default='value not needed', max_length=200)),
                ('description', models.TextField(default='')),
                ('meta_tag', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='meta_key_sample', to='managing_files.MetaKey')),
                ('owner', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='meta_key_sample', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['sample__id', '-creation_date'],
            },
        ),
        migrations.CreateModel(
            name='MixedInfections',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('average_value', models.FloatField(default=0.0)),
                ('description', models.TextField(default='')),
                ('creation_date', models.DateTimeField(auto_now_add=True, verbose_name='uploaded date')),
                ('last_change_date', models.DateTimeField(blank=True, null=True, verbose_name='uploaded date')),
                ('has_master_vector', models.BooleanField(default=False)),
            ],
            options={
                'ordering': ['tag'],
            },
        ),
        migrations.CreateModel(
            name='MixedInfectionsTag',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(blank=True, db_index=True, max_length=50, null=True)),
            ],
            options={
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='ProcessControler',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('creation_date', models.DateTimeField(auto_now_add=True, verbose_name='Submit job')),
                ('close_date', models.DateTimeField(blank=True, null=True, verbose_name='Close date')),
                ('is_finished', models.BooleanField(default=False)),
                ('is_running', models.BooleanField(default=False)),
                ('is_error', models.BooleanField(default=False)),
                ('name', models.CharField(blank=True, db_index=True, max_length=50, null=True)),
                ('name_sge_id', models.CharField(blank=True, db_index=True, max_length=20, null=True)),
                ('owner', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='process_controles', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['creation_date'],
            },
        ),
        migrations.CreateModel(
            name='Project',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(blank=True, db_index=True, max_length=200, null=True, verbose_name='Project name')),
                ('creation_date', models.DateTimeField(auto_now_add=True, verbose_name='Uploaded date')),
                ('last_change_date', models.DateTimeField(blank=True, null=True, verbose_name='Last change date')),
                ('is_deleted', models.BooleanField(default=False)),
                ('number_passed_sequences', models.SmallIntegerField(default=-1)),
                ('is_deleted_in_file_system', models.BooleanField(default=False)),
                ('date_deleted', models.DateTimeField(blank=True, null=True, verbose_name='Date attached')),
                ('owner', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='project', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-creation_date'],
            },
        ),
        migrations.CreateModel(
            name='ProjectSample',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('creation_date', models.DateTimeField(auto_now_add=True, verbose_name='uploaded date')),
                ('is_finished', models.BooleanField(default=False)),
                ('is_deleted', models.BooleanField(default=False)),
                ('is_error', models.BooleanField(default=False)),
                ('is_mask_consensus_sequences', models.BooleanField(default=False)),
                ('alert_first_level', models.IntegerField(default=0)),
                ('alert_second_level', models.IntegerField(default=0)),
                ('seq_name_all_consensus', models.CharField(blank=True, max_length=200, null=True)),
                ('is_deleted_in_file_system', models.BooleanField(default=False)),
                ('date_deleted', models.DateTimeField(blank=True, null=True, verbose_name='Date attached')),
                ('count_variations', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='project_samples', to='managing_files.CountVariations')),
                ('mixed_infections', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='project_samples', to='managing_files.MixedInfections')),
                ('project', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='project_samples', to='managing_files.Project')),
            ],
            options={
                'ordering': ['project__id', '-creation_date'],
            },
        ),
        migrations.CreateModel(
            name='Reference',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(db_index=True, max_length=200, verbose_name='Reference name')),
                ('display_name', models.CharField(db_index=True, default='', max_length=200, verbose_name='Display name')),
                ('isolate_name', models.CharField(default='', max_length=200, verbose_name='Isolate Name')),
                ('creation_date', models.DateTimeField(auto_now_add=True, verbose_name='Uploaded Date')),
                ('reference_fasta', fluwebvirus.formatChecker.ContentTypeRestrictedFileField(blank=True, max_length=500, null=True, upload_to=managing_files.models.reference_directory_path)),
                ('reference_fasta_name', models.CharField(default='', max_length=200, verbose_name='Fasta file')),
                ('hash_reference_fasta', models.CharField(blank=True, max_length=50, null=True)),
                ('reference_genbank', fluwebvirus.formatChecker.ContentTypeRestrictedFileField(blank=True, max_length=500, null=True, upload_to=managing_files.models.reference_directory_path)),
                ('reference_genbank_name', models.CharField(default='', max_length=200, verbose_name='Genbank file')),
                ('hash_reference_genbank', models.CharField(blank=True, max_length=50, null=True)),
                ('is_obsolete', models.BooleanField(default=False, verbose_name='Obsolete')),
                ('is_deleted', models.BooleanField(default=False, verbose_name='Deleted')),
                ('number_of_locus', models.IntegerField(default=0, verbose_name='#Locus')),
                ('description', models.CharField(blank=True, default='', max_length=500, null=True, verbose_name='Description')),
                ('is_deleted_in_file_system', models.BooleanField(default=False)),
                ('date_deleted', models.DateTimeField(blank=True, null=True, verbose_name='Date attached')),
                ('specie_tag', models.CharField(default='', max_length=20)),
                ('owner', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='reference', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Reference',
                'verbose_name_plural': 'References',
                'ordering': ['-creation_date'],
            },
        ),
        migrations.CreateModel(
            name='Sample',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(blank=True, db_index=True, max_length=200, null=True, verbose_name='Sample Name')),
                ('date_of_onset', models.DateField(blank=True, null=True, verbose_name='date of onset')),
                ('date_of_collection', models.DateField(blank=True, null=True, verbose_name='date of collection')),
                ('date_of_receipt_lab', models.DateField(blank=True, null=True, verbose_name='date of receipt lab')),
                ('week', models.IntegerField(blank=True, null=True)),
                ('day', models.IntegerField(blank=True, null=True)),
                ('month', models.IntegerField(blank=True, null=True)),
                ('year', models.IntegerField(blank=True, null=True)),
                ('creation_date', models.DateTimeField(auto_now_add=True, verbose_name='Uploaded Date')),
                ('is_deleted', models.BooleanField(default=False)),
                ('is_obsolete', models.BooleanField(default=False)),
                ('geo_local', django.contrib.gis.db.models.fields.PointField(blank=True, null=True, srid=4326)),
                ('type_subtype', models.CharField(blank=True, max_length=150, null=True)),
                ('number_alerts', models.IntegerField(blank=True, default=0, null=True, verbose_name='Alerts')),
                ('is_valid_1', models.BooleanField(default=False)),
                ('file_name_1', models.CharField(blank=True, max_length=200, null=True)),
                ('candidate_file_name_1', models.CharField(blank=True, max_length=200, null=True)),
                ('path_name_1', fluwebvirus.formatChecker.ContentTypeRestrictedFileField(blank=True, max_length=500, null=True, upload_to=managing_files.models.user_directory_path)),
                ('is_valid_2', models.BooleanField(default=False)),
                ('file_name_2', models.CharField(blank=True, max_length=200, null=True)),
                ('candidate_file_name_2', models.CharField(blank=True, max_length=200, null=True)),
                ('path_name_2', fluwebvirus.formatChecker.ContentTypeRestrictedFileField(blank=True, max_length=500, null=True, upload_to=managing_files.models.user_directory_path)),
                ('type_of_fastq', models.SmallIntegerField(default=-1, verbose_name='File type')),
                ('has_files', models.BooleanField(default=False)),
                ('is_ready_for_projects', models.BooleanField(default=False)),
                ('is_sample_in_the_queue', models.BooleanField(default=False)),
                ('is_deleted_in_file_system', models.BooleanField(default=False)),
                ('date_deleted', models.DateTimeField(blank=True, null=True, verbose_name='Date deleted')),
                ('is_deleted_processed_fastq', models.BooleanField(default=False)),
                ('date_deleted_processed_fastq', models.DateTimeField(blank=True, null=True, verbose_name='Date fastq deleted')),
                ('data_set', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='sample', to='managing_files.DataSet')),
                ('identify_virus', models.ManyToManyField(to='manage_virus.IdentifyVirus')),
                ('mixed_infections_tag', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='sample', to='managing_files.MixedInfectionsTag', verbose_name='Putative Mixed Infection')),
                ('owner', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='sample', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-creation_date'],
            },
        ),
        migrations.CreateModel(
            name='SeasonReference',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(blank=True, db_index=True, max_length=100, null=True)),
                ('creation_date', models.DateTimeField(auto_now_add=True, verbose_name='Date creation')),
                ('owner', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='season_reference', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Software',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(blank=True, max_length=100, null=True)),
                ('path_to_run', models.CharField(max_length=300)),
                ('version', models.CharField(max_length=200)),
                ('version_long', models.TextField(default='')),
                ('last_update', models.DateTimeField(auto_now_add=True, null=True, verbose_name='Last update date')),
            ],
            options={
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Statistics',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('value', models.FloatField(default=0.0)),
            ],
        ),
        migrations.CreateModel(
            name='TagName',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(blank=True, db_index=True, max_length=100, null=True)),
                ('creation_date', models.DateTimeField(auto_now_add=True, verbose_name='Uploaded Date')),
                ('is_meta_data', models.BooleanField(default=False)),
                ('owner', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='tag_name', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='TagNames',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('value', models.CharField(max_length=150)),
                ('sample', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='managing_files.Sample')),
                ('tag_name', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='managing_files.TagName')),
            ],
        ),
        migrations.CreateModel(
            name='UploadFiles',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_valid', models.BooleanField(default=False)),
                ('is_processed', models.BooleanField(default=False)),
                ('is_deleted', models.BooleanField(default=False)),
                ('number_errors', models.IntegerField(default=0)),
                ('number_files_processed', models.IntegerField(default=0)),
                ('number_files_to_process', models.IntegerField(default=0)),
                ('file_name', models.CharField(blank=True, max_length=300, null=True)),
                ('creation_date', models.DateTimeField(auto_now_add=True, verbose_name='Uploaded Date')),
                ('attached_date', models.DateTimeField(blank=True, null=True, verbose_name='Date attached')),
                ('is_deleted_in_file_system', models.BooleanField(default=False)),
                ('date_deleted', models.DateTimeField(blank=True, null=True, verbose_name='Date attached')),
                ('path_name', fluwebvirus.formatChecker.ContentTypeRestrictedFileField(blank=True, max_length=500, null=True, upload_to=managing_files.models.user_directory_path)),
                ('description', models.TextField(default='')),
                ('owner', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='upload_files', to=settings.AUTH_USER_MODEL)),
                ('samples', models.ManyToManyField(to='managing_files.Sample')),
                ('type_file', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='upload_files', to='managing_files.MetaKey')),
                ('upload_file', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='managing_files.UploadFiles')),
            ],
            options={
                'ordering': ['-creation_date'],
            },
        ),
        migrations.CreateModel(
            name='VaccineStatus',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(blank=True, db_index=True, max_length=100, null=True)),
                ('creation_date', models.DateTimeField(auto_now_add=True, verbose_name='Date creation')),
                ('owner', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='vaccine_status', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['creation_date', 'name'],
            },
        ),
        migrations.AddField(
            model_name='statistics',
            name='tag',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='statistics', to='managing_files.TagName'),
        ),
        migrations.AddField(
            model_name='sample',
            name='tag_names',
            field=models.ManyToManyField(through='managing_files.TagNames', to='managing_files.TagName'),
        ),
        migrations.AddField(
            model_name='sample',
            name='vaccine_status',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='sample', to='managing_files.VaccineStatus'),
        ),
        migrations.AddField(
            model_name='reference',
            name='season',
            field=models.ManyToManyField(to='managing_files.SeasonReference'),
        ),
        migrations.AddField(
            model_name='projectsample',
            name='sample',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='project_samples', to='managing_files.Sample'),
        ),
        migrations.AddField(
            model_name='project',
            name='reference',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='project', to='managing_files.Reference'),
        ),
        migrations.AddField(
            model_name='mixedinfections',
            name='tag',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='mixed_infections', to='managing_files.MixedInfectionsTag'),
        ),
        migrations.AddField(
            model_name='metakeysample',
            name='sample',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='meta_key_sample', to='managing_files.Sample'),
        ),
        migrations.AddField(
            model_name='metakeyreference',
            name='reference',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='meta_key_reference', to='managing_files.Reference'),
        ),
        migrations.AddField(
            model_name='metakeyprojectsample',
            name='project_sample',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='meta_key_project_sample', to='managing_files.ProjectSample'),
        ),
        migrations.AddField(
            model_name='metakeyproject',
            name='project',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='meta_key_project', to='managing_files.Project'),
        ),
        migrations.AddIndex(
            model_name='reference',
            index=models.Index(fields=['name'], name='name_idx'),
        ),
    ]
